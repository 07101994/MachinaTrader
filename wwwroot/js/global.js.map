{"version":3,"sources":["src/global.js"],"names":["jsInterval","signalrConnections","runJsInterval","script","str","delay","setInterval","clearJsInterval","key","Object","prototype","hasOwnProperty","call","clearInterval","addSignalrClient","name","connection","cleanSignalr","stop","beforeHook","$","document","off","afterHook","select2","theme","templateResult","selectPickerImage","templateSelection","width"],"mappings":"AAAA;;AACA;AAEA,IAAMA,aAAa,EAAnB;AACA,IAAMC,qBAAqB,EAA3B;;AAEA,SAASC,aAAT,CAAuBC,MAAvB,EAA+BC,GAA/B,EAAoCC,KAApC,EAA2C;AACzC,MAAI,CAACL,WAAWI,GAAX,CAAL,EAAsB;AACpB;AACAJ,eAAWI,GAAX,IAAkBE,YAAYH,MAAZ,EAAoBE,KAApB,CAAlB;AACD;AACF;;AAED,SAASE,eAAT,GAA2B;AACzB,OAAK,IAAMC,GAAX,IAAkBR,UAAlB,EAA8B;AAC5B,QAAIS,OAAOC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCZ,UAArC,EAAiDQ,GAAjD,CAAJ,EAA2D;AACzDK,oBAAcb,WAAWQ,GAAX,CAAd;AACAR,iBAAWQ,GAAX,IAAkB,IAAlB;AACA,aAAOR,WAAWQ,GAAX,CAAP;AACD;AACF;AACF;AAED;;;AACA,SAASM,gBAAT,CAA0BC,IAA1B,EAAgCC,UAAhC,EAA4C;AAC1C,MAAI,CAACf,mBAAmBc,IAAnB,CAAL,EAA+B;AAC7B;AACAd,uBAAmBc,IAAnB,IAA2BC,UAA3B;AACD;AACF;;AAED,SAASC,YAAT,GAAwB;AACtB,OAAK,IAAMT,GAAX,IAAkBP,kBAAlB,EAAsC;AACpC,QAAIQ,OAAOC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCX,kBAArC,EAAyDO,GAAzD,CAAJ,EAAmE;AACjE;AACA;AACAP,yBAAmBO,GAAnB,EAAwBU,IAAxB;AACA,aAAOjB,mBAAmBO,GAAnB,CAAP;AACD;AACF;AACF;;AAED,SAASW,UAAT,GAAsB;AACrB;;AACA;;;;AAIA;AACAC,IAAEC,QAAF,EAAYC,GAAZ,CAAgB,SAAhB;AACAf;AACAU;AACA;;AAED,SAASM,SAAT,GAAqB;AACpBH,IAAE,UAAF,EAAcI,OAAd,CAAsB;AACrBC,WAAO,WADc;AAErBC,oBAAgBC,iBAFK;AAGrBC,uBAAmBD,iBAHE;AAIrBE,WAAO;AAJc,GAAtB;AAMA","sourcesContent":["// Wire up signalr and js intervals -> preparePage() is hooked from navigation script on page change\r\n/* eslint-disable */\r\n\r\nconst jsInterval = {}\r\nconst signalrConnections = {}\r\n\r\nfunction runJsInterval(script, str, delay) {\r\n  if (!jsInterval[str]) {\r\n    // console.log(\"Not in array\")\r\n    jsInterval[str] = setInterval(script, delay)\r\n  }\r\n}\r\n\r\nfunction clearJsInterval() {\r\n  for (const key in jsInterval) {\r\n    if (Object.prototype.hasOwnProperty.call(jsInterval, key)) {\r\n      clearInterval(jsInterval[key])\r\n      jsInterval[key] = null\r\n      delete jsInterval[key]\r\n    }\r\n  }\r\n}\r\n\r\n/* eslint-disable no-unused-vars */\r\nfunction addSignalrClient(name, connection) {\r\n  if (!signalrConnections[name]) {\r\n    // console.log(\"Not in array\")\r\n    signalrConnections[name] = connection\r\n  }\r\n}\r\n\r\nfunction cleanSignalr() {\r\n  for (const key in signalrConnections) {\r\n    if (Object.prototype.hasOwnProperty.call(signalrConnections, key)) {\r\n      // console.log(\"Disconnect\")\r\n      // console.log(signalrConnections[key])\r\n      signalrConnections[key].stop()\r\n      delete signalrConnections[key]\r\n    }\r\n  }\r\n}\r\n\r\nfunction beforeHook() {\r\n\t// Hacky way to remove intervals\r\n\t/*for(i=0; i<100; i++)\r\n\t{\r\n\t\twindow.clearInterval(i);\r\n\t}*/\t\t\r\n\t//Cleanup all keydown listeners -> Needed for some JS components\r\n\t$(document).off(\"keydown\");\t\r\n\tclearJsInterval();\r\n\tcleanSignalr();\r\n}\r\n\r\nfunction afterHook() {\r\n\t$(\".select2\").select2({\r\n\t\ttheme: \"bootstrap\",\r\n\t\ttemplateResult: selectPickerImage,\r\n\t\ttemplateSelection: selectPickerImage,\r\n\t\twidth: \"100%\"\r\n\t});\r\n}"],"file":"global.js"}